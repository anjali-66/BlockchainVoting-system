{"ast":null,"code":"const COOP_ERROR_MESSAGE = `Coinbase Wallet SDK requires the Cross-Origin-Opener-Policy header to not be set to 'same-origin'. This is to ensure that the SDK can communicate with the Coinbase Smart Wallet app.\n\nPlease see https://www.smartwallet.dev/guides/tips/popup-tips#cross-origin-opener-policy for more information.`;\n/**\n * Creates a checker for the Cross-Origin-Opener-Policy (COOP).\n *\n * @returns An object with methods to get and check the Cross-Origin-Opener-Policy.\n *\n * @method getCrossOriginOpenerPolicy\n * Retrieves current Cross-Origin-Opener-Policy.\n * @throws Will throw an error if the policy has not been checked yet.\n *\n * @method checkCrossOriginOpenerPolicy\n * Checks the Cross-Origin-Opener-Policy of the current environment.\n * If in a non-browser environment, sets the policy to 'non-browser-env'.\n * If in a browser environment, fetches the policy from the current origin.\n * Logs an error if the policy is 'same-origin'.\n */\nconst createCoopChecker = () => {\n  let crossOriginOpenerPolicy;\n  return {\n    getCrossOriginOpenerPolicy: () => {\n      if (crossOriginOpenerPolicy === undefined) {\n        return 'undefined';\n      }\n      return crossOriginOpenerPolicy;\n    },\n    checkCrossOriginOpenerPolicy: async () => {\n      if (typeof window === 'undefined') {\n        // Non-browser environment\n        crossOriginOpenerPolicy = 'non-browser-env';\n        return;\n      }\n      try {\n        const url = `${window.location.origin}${window.location.pathname}`;\n        const response = await fetch(url, {\n          method: 'HEAD'\n        });\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const result = response.headers.get('Cross-Origin-Opener-Policy');\n        crossOriginOpenerPolicy = result !== null && result !== void 0 ? result : 'null';\n        if (crossOriginOpenerPolicy === 'same-origin') {\n          console.error(COOP_ERROR_MESSAGE);\n        }\n      } catch (error) {\n        console.error('Error checking Cross-Origin-Opener-Policy:', error.message);\n        crossOriginOpenerPolicy = 'error';\n      }\n    }\n  };\n};\nexport const {\n  checkCrossOriginOpenerPolicy,\n  getCrossOriginOpenerPolicy\n} = createCoopChecker();\n//# sourceMappingURL=checkCrossOriginOpenerPolicy.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}